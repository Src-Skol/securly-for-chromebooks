var port = chrome.runtime.connect({ name: "yt" });
function onWindowLoad() {
  (window.onscroll = function () {
    onWindowScroll();
  }),
    (window.youtubeLastCheck = null),
    sendOptionsRequest();
  let e = document.documentElement.innerHTML.indexOf("ytp-embed") >= 0;
  if (e) {
    let n = null,
      t = null,
      o = /\/watch\?v=([a-zA-Z0-9-_]{1,})">/,
      d = document.documentElement.innerHTML.match(o);
    2 == d.length && (n = d[1]);
    let i = /\/channel\/([a-zA-Z0-9-_]{1,})"/;
    2 == (d = document.documentElement.innerHTML.match(i)).length && (t = d[1]);
    let l = { channelId: t, videoId: n, category: null, embedded: e };
    if (null != l.channelId || null != l.videoId) return sendData(l), !0;
  }
  if (
    -1 ==
    document.documentElement.innerHTML.indexOf(
      'window["ytInitialPlayerResponse"] = null',
    )
  ) {
    sendData(fetchPageInfo(!0, document.documentElement.innerHTML));
  }
  if (document.documentElement.innerHTML.indexOf('itemprop="channelId"') > -1) {
    sendData(fetchPageInfo(!1));
  }
  var n = document.title.toString(),
